

def night()
    if after 9PM and before 6AM:
        return True   # Night	
    else:
        return False  # Not Night

def aqi_epa_bad()
    if epa_aqi > 100:
        return True   # Air Bad
    else:
        return False  # Air Good

def aqi_local_bad()
    if local > 100:
        return True   # Air Bad
    else:
        return False  # Air Good

def erv_update():
    if not night() and not aqi_epa_bad() and not aqi_local_bad():  # Day and Good Air and Good Air
        if erv.state is 'smart':
            nothing to do
        else:
            erv.smart()
    elif night() or aqi_epa_bad() or aqi_local_bad():  # Night or Bad Air or Bad Air
        if erv.state is 'standby':
            nothing to do
        else:
            erv.standby()
    else:
       something went wrong


put erv_update() in an interrupt timer to run every 3 minutes








